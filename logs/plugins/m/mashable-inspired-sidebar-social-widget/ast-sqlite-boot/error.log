file:///home/runner/work/playground-tester/playground-tester/node_modules/@wp-playground/cli/index.js:237
        throw new Error(y, { cause: u });
              ^

Error: [23-Apr-2025 05:50:18 UTC] PHP Fatal error:  Array and string offset access syntax with curly braces is no longer supported in /wordpress/wp-content/plugins/my-portfolio-plus/MyPortfolioPlus.php on line 339
[23-Apr-2025 05:50:26 UTC] PHP Fatal error:  Array and string offset access syntax with curly braces is no longer supported in /wordpress/wp-content/plugins/my-portfolio-plus/MyPortfolioPlus.php on line 339
[23-Apr-2025 05:50:34 UTC] PHP Fatal error:  Array and string offset access syntax with curly braces is no longer supported in /wordpress/wp-content/plugins/my-portfolio-plus/MyPortfolioPlus.php on line 339
[23-Apr-2025 05:50:43 UTC] PHP Warning:  Undefined array key "guncelle" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 143
[23-Apr-2025 05:50:43 UTC] PHP Warning:  Undefined array key "makaledepo_hidden" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 159
[23-Apr-2025 05:50:44 UTC] PHP Warning:  Undefined array key "guncelle" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 143
[23-Apr-2025 05:50:44 UTC] PHP Warning:  Undefined array key "makaledepo_hidden" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 159
[23-Apr-2025 05:50:50 UTC] PHP Warning:  Undefined array key "guncelle" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 143
[23-Apr-2025 05:50:50 UTC] PHP Warning:  Undefined array key "makaledepo_hidden" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 159
[23-Apr-2025 05:50:52 UTC] PHP Warning:  Undefined array key "guncelle" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 143
[23-Apr-2025 05:50:52 UTC] PHP Warning:  Undefined array key "makaledepo_hidden" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 159
[23-Apr-2025 05:50:59 UTC] PHP Warning:  Undefined array key "guncelle" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 143
[23-Apr-2025 05:50:59 UTC] PHP Warning:  Undefined array key "makaledepo_hidden" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 159
[23-Apr-2025 05:51:00 UTC] PHP Warning:  Undefined array key "guncelle" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 143
[23-Apr-2025 05:51:00 UTC] PHP Warning:  Undefined array key "makaledepo_hidden" in /wordpress/wp-content/plugins/makaledepo-senkronizasyon-sihirbazi/wp_md_hook.php on line 159
[23-Apr-2025 05:51:09 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/mirrorimages/mirrim.php on line 64
[23-Apr-2025 05:51:10 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/mirrorimages/mirrim.php on line 64
[23-Apr-2025 05:51:17 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/mirrorimages/mirrim.php on line 64
[23-Apr-2025 05:51:18 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/mirrorimages/mirrim.php on line 64
[23-Apr-2025 05:51:26 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/mirrorimages/mirrim.php on line 64
[23-Apr-2025 05:51:27 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/mirrorimages/mirrim.php on line 64
[23-Apr-2025 05:51:36 UTC] PHP Deprecated:  Required parameter $trid follows optional parameter $el_type in /wordpress/wp-content/plugins/ml/sitepress.class.php on line 1824
[23-Apr-2025 05:51:36 UTC] PHP Deprecated:  Required parameter $language_code follows optional parameter $el_type in /wordpress/wp-content/plugins/ml/sitepress.class.php on line 1824
[23-Apr-2025 05:51:36 UTC] PHP Deprecated:  Required parameter $suffix follows optional parameter $prefix in /wordpress/wp-content/plugins/ml/inc/translation-management/translation-management.class.php on line 2301
[23-Apr-2025 05:51:36 UTC] PHP Fatal error:  Array and string offset access syntax with curly braces is no longer supported in /wordpress/wp-content/plugins/ml/inc/translation-management/pro-translation.class.php on line 1320
[23-Apr-2025 05:51:45 UTC] PHP Deprecated:  Required parameter $trid follows optional parameter $el_type in /wordpress/wp-content/plugins/ml/sitepress.class.php on line 1824
[23-Apr-2025 05:51:45 UTC] PHP Deprecated:  Required parameter $language_code follows optional parameter $el_type in /wordpress/wp-content/plugins/ml/sitepress.class.php on line 1824
[23-Apr-2025 05:51:45 UTC] PHP Deprecated:  Required parameter $suffix follows optional parameter $prefix in /wordpress/wp-content/plugins/ml/inc/translation-management/translation-management.class.php on line 2301
[23-Apr-2025 05:51:45 UTC] PHP Fatal error:  Array and string offset access syntax with curly braces is no longer supported in /wordpress/wp-content/plugins/ml/inc/translation-management/pro-translation.class.php on line 1320
[23-Apr-2025 05:51:54 UTC] PHP Deprecated:  Required parameter $trid follows optional parameter $el_type in /wordpress/wp-content/plugins/ml/sitepress.class.php on line 1824
[23-Apr-2025 05:51:54 UTC] PHP Deprecated:  Required parameter $language_code follows optional parameter $el_type in /wordpress/wp-content/plugins/ml/sitepress.class.php on line 1824
[23-Apr-2025 05:51:54 UTC] PHP Deprecated:  Required parameter $suffix follows optional parameter $prefix in /wordpress/wp-content/plugins/ml/inc/translation-management/translation-management.class.php on line 2301
[23-Apr-2025 05:51:54 UTC] PHP Fatal error:  Array and string offset access syntax with curly braces is no longer supported in /wordpress/wp-content/plugins/ml/inc/translation-management/pro-translation.class.php on line 1320
[23-Apr-2025 05:52:56 UTC] PHP Fatal error:  Uncaught TypeError: call_user_func_array(): Argument #1 ($callback) must be a valid callback, function "msplugin_activate" not found or invalid function name in /wordpress/wp-includes/class-wp-hook.php:324
Stack trace:
#0 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#1 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#2 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_mac-so...', false)
#3 /internal/eval.php(20): activate_plugin('mac-sonuclari/l...')
#4 {main}
  thrown in /wordpress/wp-includes/class-wp-hook.php on line 324
[23-Apr-2025 05:53:04 UTC] PHP Fatal error:  Uncaught TypeError: call_user_func_array(): Argument #1 ($callback) must be a valid callback, function "msplugin_activate" not found or invalid function name in /wordpress/wp-includes/class-wp-hook.php:324
Stack trace:
#0 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#1 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#2 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_mac-so...', false)
#3 /internal/eval.php(20): activate_plugin('mac-sonuclari/l...')
#4 {main}
  thrown in /wordpress/wp-includes/class-wp-hook.php on line 324
[23-Apr-2025 05:53:11 UTC] PHP Fatal error:  Uncaught TypeError: call_user_func_array(): Argument #1 ($callback) must be a valid callback, function "msplugin_activate" not found or invalid function name in /wordpress/wp-includes/class-wp-hook.php:324
Stack trace:
#0 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#1 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#2 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_mac-so...', false)
#3 /internal/eval.php(20): activate_plugin('mac-sonuclari/l...')
#4 {main}
  thrown in /wordpress/wp-includes/class-wp-hook.php on line 324
[23-Apr-2025 05:53:41 UTC] PHP Fatal error:  Uncaught TypeError: count(): Argument #1 ($value) must be of type Countable|array, bool given in /wordpress/wp-content/plugins/mailchimp-popup/mailchimp-popup-mailmunch.php:85
Stack trace:
#0 /wordpress/wp-includes/class-wp-hook.php(324): mc_pop_mm_assets('')
#1 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#2 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#3 /wordpress/wp-settings.php(727): do_action('init')
#4 /wordpress/wp-config.php(102): require_once('/wordpress/wp-s...')
#5 /wordpress/wp-load.php(50): require_once('/wordpress/wp-c...')
#6 /internal/eval.php(3): require_once('/wordpress/wp-l...')
#7 {main}
  thrown in /wordpress/wp-content/plugins/mailchimp-popup/mailchimp-popup-mailmunch.php on line 85
[23-Apr-2025 05:53:50 UTC] PHP Fatal error:  Uncaught TypeError: count(): Argument #1 ($value) must be of type Countable|array, bool given in /wordpress/wp-content/plugins/mailchimp-popup/mailchimp-popup-mailmunch.php:85
Stack trace:
#0 /wordpress/wp-includes/class-wp-hook.php(324): mc_pop_mm_assets('')
#1 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#2 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#3 /wordpress/wp-settings.php(727): do_action('init')
#4 /wordpress/wp-config.php(102): require_once('/wordpress/wp-s...')
#5 /wordpress/wp-load.php(50): require_once('/wordpress/wp-c...')
#6 /internal/eval.php(3): require_once('/wordpress/wp-l...')
#7 {main}
  thrown in /wordpress/wp-content/plugins/mailchimp-popup/mailchimp-popup-mailmunch.php on line 85
[23-Apr-2025 05:53:59 UTC] PHP Fatal error:  Uncaught TypeError: count(): Argument #1 ($value) must be of type Countable|array, bool given in /wordpress/wp-content/plugins/mailchimp-popup/mailchimp-popup-mailmunch.php:85
Stack trace:
#0 /wordpress/wp-includes/class-wp-hook.php(324): mc_pop_mm_assets('')
#1 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#2 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#3 /wordpress/wp-settings.php(727): do_action('init')
#4 /wordpress/wp-config.php(102): require_once('/wordpress/wp-s...')
#5 /wordpress/wp-load.php(50): require_once('/wordpress/wp-c...')
#6 /internal/eval.php(3): require_once('/wordpress/wp-l...')
#7 {main}
  thrown in /wordpress/wp-content/plugins/mailchimp-popup/mailchimp-popup-mailmunch.php on line 85
[23-Apr-2025 05:54:59 UTC] PHP Deprecated:  WP_SQLite_Driver::recreate_table_from_information_schema(): Implicitly marking parameter $column_map as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 2783
[23-Apr-2025 05:54:59 UTC] PHP Deprecated:  WP_SQLite_Driver::set_result_from_affected_rows(): Implicitly marking parameter $override as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3541
[23-Apr-2025 05:54:59 UTC] PHP Deprecated:  WP_SQLite_Driver::new_driver_exception(): Implicitly marking parameter $previous as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3564
[23-Apr-2025 05:54:59 UTC] PHP Deprecated:  WP_SQLite_Driver_Exception::__construct(): Implicitly marking parameter $previous as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver-exception.php on line 19
[23-Apr-2025 05:55:01 UTC] PHP Deprecated:  WP_SQLite_Driver::recreate_table_from_information_schema(): Implicitly marking parameter $column_map as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 2783
[23-Apr-2025 05:55:01 UTC] PHP Deprecated:  WP_SQLite_Driver::set_result_from_affected_rows(): Implicitly marking parameter $override as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3541
[23-Apr-2025 05:55:01 UTC] PHP Deprecated:  WP_SQLite_Driver::new_driver_exception(): Implicitly marking parameter $previous as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3564
[23-Apr-2025 05:55:01 UTC] PHP Deprecated:  WP_SQLite_Driver_Exception::__construct(): Implicitly marking parameter $previous as nullable is deprecated, the explicit nullable type must be used instead in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver-exception.php on line 19
[23-Apr-2025 05:57:37 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6121
[23-Apr-2025 05:57:37 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6121
[23-Apr-2025 05:57:46 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6121
[23-Apr-2025 05:57:46 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6121
[23-Apr-2025 05:57:55 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6121
[23-Apr-2025 05:57:55 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6121
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> DROP PROCEDURE IF EXISTS wp_vsmp_compute_attribution;</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: DROP PROCEDURE IF EXISTS `wp_vsmp_compute_attribution` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near "PROCEDURE": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' DROP PROCEDURE...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' DROP PROCEDURE...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' DROP PROCEDURE...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  DROP PROCEDURE IF EXISTS wp_vsmp_compute_attribution; made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_attribution (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT( 	"CREATE TABLE tmp_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id, MAX(influence) AS influence" 	, " FROM ", table_prefix, "vsmp_influence a" 	, " WHERE a.conversion_id IN (" 	, " SELECT conversion_id" 	, " FROM tmp_conversion_log" 	, " )"     , " GROUP BY a.conversion_id, a.delivery_event_id"     , ")" ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT( 	"CREATE TABLE tmp_adj_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id," 	, " (a.influence * (CASE WHEN sum_influence > 1 THEN 1 / sum_influence ELSE 1 END)) / 1 AS adj_influence" 	, " FROM tmp_influence a" 	, " JOIN (" 	, " SELECT conversion_id, SUM(influence) AS sum_influence" 	, " FROM tmp_influence" 	, " GROUP BY conversion_id" 	, " ) b ON b.conversion_id = a.conversion_id"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT( 	"CREATE TABLE tmp_attribution AS ("     , " SELECT DATE(b.log_time) AS cal_date, a.delivery_event_id,"     , " SUM(a.adj_influence) AS attributed_conversions,"     , " SUM(a.adj_influence * b.conversion_val) AS attributed_value"     , " FROM tmp_adj_influence a" 	, " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"  	, " GROUP BY 1, 2" 	, " )" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_attribution" 	, " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"      , " AND"     , " (SELECT to_date FROM tmp_date_range)"	 ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution"     , " (cal_date, delivery_event_id, attributed_conversions, attributed_value)"     , " SELECT cal_date, delivery_event_id, attributed_conversions, attributed_value"     , " FROM tmp_attribution" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution" 	, " (cal_date, attributed_conversions, attributed_value)" 	, " SELECT a.conversion_date," 	, " a.conversion_count - IFNULL(b.attributed_conversions,0) AS unattributed_conversions," 	, " a.conversion_value - IFNULL(b.attributed_value,0) AS unattributed_value" 	, " FROM (" 	, " SELECT date(log_time) AS conversion_date,"     , " COUNT(*) AS conversion_count,"     , " SUM(conversion_val) AS conversion_value" 	, " FROM tmp_conversion_log" 	, " GROUP BY 1" 	, " ) a" 	, " LEFT JOIN (" 	, " SELECT cal_date,"     , " SUM(attributed_conversions) AS attributed_conversions,"     , " SUM(attributed_value) AS attributed_value" 	, " FROM tmp_attribution" 	, " GROUP BY cal_date" 	, ") b ON b.cal_date = a.conversion_date"     , " WHERE a.conversion_value - IFNULL(b.attributed_value,0) > .01" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; END</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
MySQL query not supported. Cause: statement type: "createStatement" > "createProcedure"
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('MySQL query not...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_attribution (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT( 	"CREATE TABLE tmp_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id, MAX(influence) AS influence" 	, " FROM ", table_prefix, "vsmp_influence a" 	, " WHERE a.conversion_id IN (" 	, " SELECT conversion_id" 	, " FROM tmp_conversion_log" 	, " )"     , " GROUP BY a.conversion_id, a.delivery_event_id"     , ")" ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT( 	"CREATE TABLE tmp_adj_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id," 	, " (a.influence * (CASE WHEN sum_influence > 1 THEN 1 / sum_influence ELSE 1 END)) / 1 AS adj_influence" 	, " FROM tmp_influence a" 	, " JOIN (" 	, " SELECT conversion_id, SUM(influence) AS sum_influence" 	, " FROM tmp_influence" 	, " GROUP BY conversion_id" 	, " ) b ON b.conversion_id = a.conversion_id"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT( 	"CREATE TABLE tmp_attribution AS ("     , " SELECT DATE(b.log_time) AS cal_date, a.delivery_event_id,"     , " SUM(a.adj_influence) AS attributed_conversions,"     , " SUM(a.adj_influence * b.conversion_val) AS attributed_value"     , " FROM tmp_adj_influence a" 	, " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"  	, " GROUP BY 1, 2" 	, " )" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_attribution" 	, " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"      , " AND"     , " (SELECT to_date FROM tmp_date_range)"	 ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution"     , " (cal_date, delivery_event_id, attributed_conversions, attributed_value)"     , " SELECT cal_date, delivery_event_id, attributed_conversions, attributed_value"     , " FROM tmp_attribution" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution" 	, " (cal_date, attributed_conversions, attributed_value)" 	, " SELECT a.conversion_date," 	, " a.conversion_count - IFNULL(b.attributed_conversions,0) AS unattributed_conversions," 	, " a.conversion_value - IFNULL(b.attributed_value,0) AS unattributed_value" 	, " FROM (" 	, " SELECT date(log_time) AS conversion_date,"     , " COUNT(*) AS conversion_count,"     , " SUM(conversion_val) AS conversion_value" 	, " FROM tmp_conversion_log" 	, " GROUP BY 1" 	, " ) a" 	, " LEFT JOIN (" 	, " SELECT cal_date,"     , " SUM(attributed_conversions) AS attributed_conversions,"     , " SUM(attributed_value) AS attributed_value" 	, " FROM tmp_attribution" 	, " GROUP BY cal_date" 	, ") b ON b.cal_date = a.conversion_date"     , " WHERE a.conversion_value - IFNULL(b.attributed_value,0) > .01" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; END made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> DROP PROCEDURE IF EXISTS wp_vsmp_compute_influence;</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: DROP PROCEDURE IF EXISTS `wp_vsmp_compute_influence` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near "PROCEDURE": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' DROP PROCEDURE...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' DROP PROCEDURE...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' DROP PROCEDURE...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  DROP PROCEDURE IF EXISTS wp_vsmp_compute_influence; made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_influence (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_Id"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_channel_lag AS ("     , " SELECT a.ID as channel_id, a.post_title AS channel,"     , " CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) AS day_no,"     , " CONVERT(IFNULL(c.meta_value, '0'), INTEGER) AS influence"  	, " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'lag_days'"     , " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND SUBSTR(c.meta_key,1,10) = 'influence_'"  	, " WHERE a.post_type = 'vsmp_channel'"     , " AND a.post_status = 'publish' "     , " AND CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) <= CONVERT(b.meta_value, INTEGER)"     , ')' ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "CREATE TABLE tmp_delivery_event_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_delivery_event_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT DATE_SUB(from_date, INTERVAL 14 DAY) FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" 	, ")" );      PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; CREATE TABLE tmp_delivery_event_influence_01 AS (  SELECT @row_seq := @row_seq + 1 as row_seq, a.conversion_id, a.channel_id, a.delivery_event_id, a.delivery_event_time, a.conversion_time, a.day_no  FROM (   SELECT a1.conversion_id, a3.channel_id, a2.delivery_event_id, a2.log_time AS delivery_event_time, a1.log_time AS conversion_time,    FLOOR(TIMESTAMPDIFF(SECOND, a2.log_time, a1.log_time) / 86400) AS day_no   FROM tmp_conversion_log a1   JOIN tmp_delivery_event_log a2 on a2.vsmp_visitor_Id = a1.vsmp_visitor_Id   JOIN tmp_delivery_event a3 ON a3.delivery_event_Id = a2.delivery_event_Id   JOIN (    SELECT channel_id, MAX(day_no) AS max_day_no    FROM tmp_channel_lag    GROUP BY channel_id   ) a4 ON a4.channel_id = a3.channel_id    WHERE a1.log_time >= a2.log_time - INTERVAL a4.max_day_no DAY   ORDER BY a1.conversion_id, a2.log_time  ) a  CROSS JOIN (   SELECT @row_seq := 0  ) b ); CREATE TABLE tmp_delivery_event_influence_02 AS (  SELECT a.conversion_id, a.channel_id, a.delivery_event_Id, a.day_no, a.delivery_event_time, a.conversion_time, b.path_seq  FROM tmp_delivery_event_influence_01 a    JOIN (   SELECT b1.row_seq, COUNT(*) AS path_seq   FROM tmp_delivery_event_influence_01 b1   JOIN tmp_delivery_event_influence_01 b2 ON b2.conversion_id = b1.conversion_id AND b2.delivery_event_time <= b1.delivery_event_time   GROUP BY b1.row_seq  ) b ON b.row_seq = a.row_seq ); SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_influence"  	, " WHERE conversion_id IN ("   	, " SELECT DISTINCT conversion_id"   	, " FROM tmp_delivery_event_influence_02"  	, ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_influence"     , " (conversion_Id, delivery_event_id, path_seq, influence)"     , " SELECT a.conversion_id, a.delivery_event_id, a.path_seq, b.influence / 100"     , " FROM tmp_delivery_event_influence_02 a"  	, " JOIN tmp_channel_lag b ON b.channel_id = a.channel_id AND b.day_no = a.day_no" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; END</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
MySQL query not supported. Cause: statement type: "createStatement" > "createProcedure"
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('MySQL query not...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_influence (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_Id"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_channel_lag AS ("     , " SELECT a.ID as channel_id, a.post_title AS channel,"     , " CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) AS day_no,"     , " CONVERT(IFNULL(c.meta_value, '0'), INTEGER) AS influence"  	, " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'lag_days'"     , " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND SUBSTR(c.meta_key,1,10) = 'influence_'"  	, " WHERE a.post_type = 'vsmp_channel'"     , " AND a.post_status = 'publish' "     , " AND CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) <= CONVERT(b.meta_value, INTEGER)"     , ')' ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "CREATE TABLE tmp_delivery_event_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_delivery_event_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT DATE_SUB(from_date, INTERVAL 14 DAY) FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" 	, ")" );      PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; CREATE TABLE tmp_delivery_event_influence_01 AS (  SELECT @row_seq := @row_seq + 1 as row_seq, a.conversion_id, a.channel_id, a.delivery_event_id, a.delivery_event_time, a.conversion_time, a.day_no  FROM (   SELECT a1.conversion_id, a3.channel_id, a2.delivery_event_id, a2.log_time AS delivery_event_time, a1.log_time AS conversion_time,    FLOOR(TIMESTAMPDIFF(SECOND, a2.log_time, a1.log_time) / 86400) AS day_no   FROM tmp_conversion_log a1   JOIN tmp_delivery_event_log a2 on a2.vsmp_visitor_Id = a1.vsmp_visitor_Id   JOIN tmp_delivery_event a3 ON a3.delivery_event_Id = a2.delivery_event_Id   JOIN (    SELECT channel_id, MAX(day_no) AS max_day_no    FROM tmp_channel_lag    GROUP BY channel_id   ) a4 ON a4.channel_id = a3.channel_id    WHERE a1.log_time >= a2.log_time - INTERVAL a4.max_day_no DAY   ORDER BY a1.conversion_id, a2.log_time  ) a  CROSS JOIN (   SELECT @row_seq := 0  ) b ); CREATE TABLE tmp_delivery_event_influence_02 AS (  SELECT a.conversion_id, a.channel_id, a.delivery_event_Id, a.day_no, a.delivery_event_time, a.conversion_time, b.path_seq  FROM tmp_delivery_event_influence_01 a    JOIN (   SELECT b1.row_seq, COUNT(*) AS path_seq   FROM tmp_delivery_event_influence_01 b1   JOIN tmp_delivery_event_influence_01 b2 ON b2.conversion_id = b1.conversion_id AND b2.delivery_event_time <= b1.delivery_event_time   GROUP BY b1.row_seq  ) b ON b.row_seq = a.row_seq ); SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_influence"  	, " WHERE conversion_id IN ("   	, " SELECT DISTINCT conversion_id"   	, " FROM tmp_delivery_event_influence_02"  	, ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_influence"     , " (conversion_Id, delivery_event_id, path_seq, influence)"     , " SELECT a.conversion_id, a.delivery_event_id, a.path_seq, b.influence / 100"     , " FROM tmp_delivery_event_influence_02 a"  	, " JOIN tmp_channel_lag b ON b.channel_id = a.channel_id AND b.day_no = a.day_no" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; END made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> DROP PROCEDURE IF EXISTS wp_vsmp_compute_path;</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: DROP PROCEDURE IF EXISTS `wp_vsmp_compute_path` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near "PROCEDURE": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' DROP PROCEDURE...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' DROP PROCEDURE...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' DROP PROCEDURE...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  DROP PROCEDURE IF EXISTS wp_vsmp_compute_path; made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_path (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(   "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_id," 	, " d.post_title AS channel_title"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'" 	, " JOIN ", table_prefix, "posts d ON d.ID = CONVERT(c.meta_value, INTEGER)"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT conversion_id, DATE(log_time) AS cal_date"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(   "CREATE TABLE tmp_influence AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_influence"     , " WHERE conversion_id IN ("     , " SELECT conversion_id"     , " FROM tmp_conversion_log"     , ")"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "DELETE FROM ", table_prefix, "vsmp_channel_metric"     , " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT(     "CREATE TABLE tmp_channel_metric_01 AS (" 	, " SELECT b.cal_date,"     , " TRIM(a.metric_detail) AS metric_detail,"     , " a.channel_count,"     , " COUNT(*) AS metric_count"     , " FROM (" 	, " SELECT a1.conversion_id,"     , " GROUP_CONCAT(a1.channel_title ORDER BY a1.channel_title SEPARATOR ';') AS metric_detail,"     , " COUNT(*) AS channel_count" 	, " FROM (" 	, " SELECT DISTINCT a1a.conversion_id, a1b.channel_title" 	, " FROM tmp_influence a1a" 	, " JOIN tmp_delivery_event a1b ON a1b.delivery_event_id = a1a.delivery_event_id"     , " ) a1" 	, " GROUP BY a1.conversion_id"     , " ) a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'channels', metric_detail, metric_count"     , " FROM tmp_channel_metric_01" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT(     "CREATE TABLE tmp_channel_metric_02 AS (" 	, " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM wp_vsmp_influence a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " WHERE a.path_seq = 1"     , " GROUP BY 1, 2"     , " )" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt8 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'starter', channel_title, metric_count"     , " FROM tmp_channel_metric_02" ); PREPARE vsmp_sql FROM @stmt8; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt9 = CONCAT(     "CREATE TABLE tmp_channel_metric_03 AS ("     , " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM tmp_influence a"      , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " JOIN ("     , " SELECT conversion_id, MAX(path_seq) AS max_path_seq"     , " FROM tmp_influence"     , " GROUP BY conversion_id"     , " ) d ON d.conversion_id = a.conversion_id AND d.max_path_seq = a.path_seq"      , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt9; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt10 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'closer', channel_title, metric_count"     , " FROM tmp_channel_metric_03" ); PREPARE vsmp_sql FROM @stmt10; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; END</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
MySQL query not supported. Cause: statement type: "createStatement" > "createProcedure"
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('MySQL query not...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_path (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(   "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_id," 	, " d.post_title AS channel_title"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'" 	, " JOIN ", table_prefix, "posts d ON d.ID = CONVERT(c.meta_value, INTEGER)"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT conversion_id, DATE(log_time) AS cal_date"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(   "CREATE TABLE tmp_influence AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_influence"     , " WHERE conversion_id IN ("     , " SELECT conversion_id"     , " FROM tmp_conversion_log"     , ")"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "DELETE FROM ", table_prefix, "vsmp_channel_metric"     , " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT(     "CREATE TABLE tmp_channel_metric_01 AS (" 	, " SELECT b.cal_date,"     , " TRIM(a.metric_detail) AS metric_detail,"     , " a.channel_count,"     , " COUNT(*) AS metric_count"     , " FROM (" 	, " SELECT a1.conversion_id,"     , " GROUP_CONCAT(a1.channel_title ORDER BY a1.channel_title SEPARATOR ';') AS metric_detail,"     , " COUNT(*) AS channel_count" 	, " FROM (" 	, " SELECT DISTINCT a1a.conversion_id, a1b.channel_title" 	, " FROM tmp_influence a1a" 	, " JOIN tmp_delivery_event a1b ON a1b.delivery_event_id = a1a.delivery_event_id"     , " ) a1" 	, " GROUP BY a1.conversion_id"     , " ) a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'channels', metric_detail, metric_count"     , " FROM tmp_channel_metric_01" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT(     "CREATE TABLE tmp_channel_metric_02 AS (" 	, " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM wp_vsmp_influence a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " WHERE a.path_seq = 1"     , " GROUP BY 1, 2"     , " )" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt8 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'starter', channel_title, metric_count"     , " FROM tmp_channel_metric_02" ); PREPARE vsmp_sql FROM @stmt8; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt9 = CONCAT(     "CREATE TABLE tmp_channel_metric_03 AS ("     , " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM tmp_influence a"      , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " JOIN ("     , " SELECT conversion_id, MAX(path_seq) AS max_path_seq"     , " FROM tmp_influence"     , " GROUP BY conversion_id"     , " ) d ON d.conversion_id = a.conversion_id AND d.max_path_seq = a.path_seq"      , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt9; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt10 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'closer', channel_title, metric_count"     , " FROM tmp_channel_metric_03" ); PREPARE vsmp_sql FROM @stmt10; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; END made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:47 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_commission (IN `table_prefix` VARCHAR(16)) BEGIN CREATE OR REPLACE TABLE tmp_date_range AS (  SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(  "CREATE OR REPLACE TABLE tmp_conversion_log AS"   , " SELECT *"  , " FROM ", table_prefix, "vsmp_conversion_log"   , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"   , " AND"    , " (SELECT to_date FROM tmp_date_range)"  ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(  "CREATE OR REPLACE TABLE tmp_delivery_event AS "  , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"   , " CONVERT(c.meta_value, INTEGER) AS channel_Id,"  , " CONVERT(d.meta_value, INTEGER) AS commission_days,"  , " CAST(e.meta_value AS DECIMAL(5,2)) AS commission_pct"   , " FROM ", table_prefix, "posts a"    , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"   , " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'"  , " JOIN ", table_prefix, "postmeta d ON d.post_id = a.ID AND d.meta_key = 'commission_days' AND d.meta_key IS NOT NULL"  , " JOIN ", table_prefix, "postmeta e ON e.post_id = a.ID AND e.meta_key = 'commission_pct' AND e.meta_key IS NOT NULL"  , " WHERE a.post_type = 'vsmp_delivery_event'"    , " AND a.post_status = 'publish'" ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(  "CREATE OR REPLACE TABLE tmp_delivery_event_log AS"      , " SELECT *"     , " FROM ", table_prefix, "vsmp_delivery_event_log"   , " WHERE DATE(log_time) BETWEEN"  , " (SELECT DATE_SUB(from_date, INTERVAL max_commission_days DAY)"  , " FROM tmp_date_range f1"  , " CROSS JOIN ("  , " SELECT MAX(commission_days) as max_commission_days"  , " FROM tmp_delivery_event"  , " ) f2"  , " )"   , " AND"     , " (SELECT to_date FROM tmp_date_range)"  , " AND delivery_event_id IN"  , " (SELECT delivery_event_id FROM tmp_delivery_event)" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(  "DELETE FROM ", table_prefix, "vsmp_commission"  , " WHERE conversion_id IN ("  , " SELECT conversion_id"  , " FROM tmp_conversion_log"  , " )" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT(  "INSERT INTO ", table_prefix, "vsmp_commission"  , " (conversion_id, conversion_date, conversion_val, delivery_event_id, commission_pct, commission)"  , " SELECT DISTINCT a.conversion_id, DATE(a.log_time), a.conversion_val, b.delivery_event_id, c.commission_pct,"  , " a.conversion_val * c.commission_pct / 100"  , " FROM tmp_conversion_log a"  , " JOiN tmp_delivery_event_log b on b.vsmp_visitor_id = a.vsmp_visitor_id"  , " JOIN tmp_delivery_event c on c.delivery_event_Id = b.delivery_event_id"  , " WHERE b.log_time BETWEEN DATE_SUB(a.log_time, INTERVAL c.commission_days DAY) AND a.log_time" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_delivery_event_log; END</p>
<p>Queries made or created this session were:</p>
<ol>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
Failed to parse the MySQL query.
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('Failed to parse...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_commission (IN `table_prefix` VARCHAR(16)) BEGIN CREATE OR REPLACE TABLE tmp_date_range AS (  SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(  "CREATE OR REPLACE TABLE tmp_conversion_log AS"   , " SELECT *"  , " FROM ", table_prefix, "vsmp_conversion_log"   , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"   , " AND"    , " (SELECT to_date FROM tmp_date_range)"  ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(  "CREATE OR REPLACE TABLE tmp_delivery_event AS "  , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"   , " CONVERT(c.meta_value, INTEGER) AS channel_Id,"  , " CONVERT(d.meta_value, INTEGER) AS commission_days,"  , " CAST(e.meta_value AS DECIMAL(5,2)) AS commission_pct"   , " FROM ", table_prefix, "posts a"    , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"   , " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'"  , " JOIN ", table_prefix, "postmeta d ON d.post_id = a.ID AND d.meta_key = 'commission_days' AND d.meta_key IS NOT NULL"  , " JOIN ", table_prefix, "postmeta e ON e.post_id = a.ID AND e.meta_key = 'commission_pct' AND e.meta_key IS NOT NULL"  , " WHERE a.post_type = 'vsmp_delivery_event'"    , " AND a.post_status = 'publish'" ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(  "CREATE OR REPLACE TABLE tmp_delivery_event_log AS"      , " SELECT *"     , " FROM ", table_prefix, "vsmp_delivery_event_log"   , " WHERE DATE(log_time) BETWEEN"  , " (SELECT DATE_SUB(from_date, INTERVAL max_commission_days DAY)"  , " FROM tmp_date_range f1"  , " CROSS JOIN ("  , " SELECT MAX(commission_days) as max_commission_days"  , " FROM tmp_delivery_event"  , " ) f2"  , " )"   , " AND"     , " (SELECT to_date FROM tmp_date_range)"  , " AND delivery_event_id IN"  , " (SELECT delivery_event_id FROM tmp_delivery_event)" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(  "DELETE FROM ", table_prefix, "vsmp_commission"  , " WHERE conversion_id IN ("  , " SELECT conversion_id"  , " FROM tmp_conversion_log"  , " )" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT(  "INSERT INTO ", table_prefix, "vsmp_commission"  , " (conversion_id, conversion_date, conversion_val, delivery_event_id, commission_pct, commission)"  , " SELECT DISTINCT a.conversion_id, DATE(a.log_time), a.conversion_val, b.delivery_event_id, c.commission_pct,"  , " a.conversion_val * c.commission_pct / 100"  , " FROM tmp_conversion_log a"  , " JOiN tmp_delivery_event_log b on b.vsmp_visitor_id = a.vsmp_visitor_id"  , " JOIN tmp_delivery_event c on c.delivery_event_Id = b.delivery_event_id"  , " WHERE b.log_time BETWEEN DATE_SUB(a.log_time, INTERVAL c.commission_days DAY) AND a.log_time" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_delivery_event_log; END made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[23-Apr-2025 05:59:48 UTC] PHP Warning:  Undefined array key "REMOTE_ADDR" in /wordpress/wp-content/plugins/marketing-performance/vsmp-functions.php on line 32
[23-Apr-2025 05:59:58 UTC] PHP Warning:  Undefined array key "REMOTE_ADDR" in /wordpress/wp-content/plugins/marketing-performance/vsmp-functions.php on line 32
[23-Apr-2025 06:00:07 UTC] PHP Warning:  Undefined array key "REMOTE_ADDR" in /wordpress/wp-content/plugins/marketing-performance/vsmp-functions.php on line 32

    at Object.onBind (file:///home/runner/work/playground-tester/playground-tester/node_modules/@wp-playground/cli/index.js:237:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async V (file:///home/runner/work/playground-tester/playground-tester/node_modules/@wp-playground/cli/index.js:64:10)
    at async ja (file:///home/runner/work/playground-tester/playground-tester/node_modules/@wp-playground/cli/cli.js:8161:12) {
  [cause]: Error: Error when executing the blueprint step #5 ({"step":"installPlugin","pluginData":{"resource":"wordpress.org/plugins","slug":"mashable-inspired-sidebar-social-widget"},"options":{"activate":true}}) : Could not download "https://downloads.wordpress.org/plugin/mashable-inspired-sidebar-social-widget.latest-stable.zip".
  				Check if the URL is correct and the s

file:///home/runner/work/playground-tester/playground-tester/node_modules/@wp-playground/cli/cli.js:21
`)},constants:R,phpIniEntries:{"openssl.cafile":"/internal/shared/ca-bundle.crt",allow_url_fopen:"1",disable_functions:""},hooks:{async beforeWordPressFiles(h){e.mountBeforeInstall&&u(h,e.mountBeforeInstall)}}}),d.log("Booted!");const W=await w.getPrimaryPhp();try{if(o&&!e.mountBeforeInstall&&!m.existsSync(f)&&(d.log("Caching preinstalled WordPress for the next boot..."),m.writeFileSync(f,await Z(W,"/wordpress")),d.log("Cached!")),e.mount&&u(W,e.mount),H=!0,l){const{php:h,reap:b}=await w.processManager.acquirePHPInstance();try{d.log("Running the Blueprint..."),await M(l,h),d.log("Finished running the blueprint")}finally{b()}}a==="build-snapshot"?(await i(e.outfile),d.log(`WordPress exported to ${e.outfile}`),process.exit(0)):a==="run-blueprint"?(d.log("Blueprint executed"),process.exit(0)):d.log(`WordPress is running on ${s}`)}catch(h){if(!e.debug)throw h;const b=W.readFileAsText(L);throw new Error(b,{cause:h})}},async handleRequest(r){return H?await w.request(r):U.forHttpCode(502,"WordPress is not ready yet")}})}te();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ^

Error: [09-Apr-2025 16:56:17 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:56:17 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:56:17 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:56:17 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:56:18 UTC] PHP Fatal error:  Uncaught ArgumentCountError: Too few arguments to function WP_Widget::__construct(), 0 passed in /wordpress/wp-includes/class-wp-widget-factory.php on line 62 and at least 2 expected in /wordpress/wp-includes/class-wp-widget.php:163
Stack trace:
#0 /wordpress/wp-includes/class-wp-widget-factory.php(62): WP_Widget->__construct()
#1 /wordpress/wp-includes/widgets.php(123): WP_Widget_Factory->register('MMA_News_Widget')
#2 /wordpress/wp-content/plugins/mma-news-widget/mma-news-widget.php(33): register_widget('MMA_News_Widget')
#3 /wordpress/wp-includes/class-wp-hook.php(324): mma_news_widget('')
#4 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#5 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#6 /wordpress/wp-includes/widgets.php(1870): do_action('widgets_init')
#7 /wordpress/wp-includes/class-wp-hook.php(324): wp_widgets_init('')
#8 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#9 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#10 /wordpress/wp-settings.php(704): do_action('init')
#11 /wordpress/wp-config.php(102): require_once('/wordpress/wp-s...')
#12 /wordpress/wp-load.php(50): require_once('/wordpress/wp-c...')
#13 /internal/eval.php(3): require_once('/wordpress/wp-l...')
#14 {main}
  thrown in /wordpress/wp-includes/class-wp-widget.php on line 163
[09-Apr-2025 16:56:26 UTC] PHP Fatal error:  Uncaught ArgumentCountError: Too few arguments to function WP_Widget::__construct(), 0 passed in /wordpress/wp-includes/class-wp-widget-factory.php on line 62 and at least 2 expected in /wordpress/wp-includes/class-wp-widget.php:163
Stack trace:
#0 /wordpress/wp-includes/class-wp-widget-factory.php(62): WP_Widget->__construct()
#1 /wordpress/wp-includes/widgets.php(123): WP_Widget_Factory->register('MMA_News_Widget')
#2 /wordpress/wp-content/plugins/mma-news-widget/mma-news-widget.php(33): register_widget('MMA_News_Widget')
#3 /wordpress/wp-includes/class-wp-hook.php(324): mma_news_widget('')
#4 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#5 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#6 /wordpress/wp-includes/widgets.php(1870): do_action('widgets_init')
#7 /wordpress/wp-includes/class-wp-hook.php(324): wp_widgets_init('')
#8 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#9 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#10 /wordpress/wp-settings.php(704): do_action('init')
#11 /wordpress/wp-config.php(102): require_once('/wordpress/wp-s...')
#12 /wordpress/wp-load.php(50): require_once('/wordpress/wp-c...')
#13 /internal/eval.php(3): require_once('/wordpress/wp-l...')
#14 {main}
  thrown in /wordpress/wp-includes/class-wp-widget.php on line 163
[09-Apr-2025 16:56:34 UTC] PHP Fatal error:  Uncaught ArgumentCountError: Too few arguments to function WP_Widget::__construct(), 0 passed in /wordpress/wp-includes/class-wp-widget-factory.php on line 62 and at least 2 expected in /wordpress/wp-includes/class-wp-widget.php:163
Stack trace:
#0 /wordpress/wp-includes/class-wp-widget-factory.php(62): WP_Widget->__construct()
#1 /wordpress/wp-includes/widgets.php(123): WP_Widget_Factory->register('MMA_News_Widget')
#2 /wordpress/wp-content/plugins/mma-news-widget/mma-news-widget.php(33): register_widget('MMA_News_Widget')
#3 /wordpress/wp-includes/class-wp-hook.php(324): mma_news_widget('')
#4 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#5 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#6 /wordpress/wp-includes/widgets.php(1870): do_action('widgets_init')
#7 /wordpress/wp-includes/class-wp-hook.php(324): wp_widgets_init('')
#8 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters(NULL, Array)
#9 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#10 /wordpress/wp-settings.php(704): do_action('init')
#11 /wordpress/wp-config.php(102): require_once('/wordpress/wp-s...')
#12 /wordpress/wp-load.php(50): require_once('/wordpress/wp-c...')
#13 /internal/eval.php(3): require_once('/wordpress/wp-l...')
#14 {main}
  thrown in /wordpress/wp-includes/class-wp-widget.php on line 163
[09-Apr-2025 16:56:43 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:56:43 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:56:43 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:56:43 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:56:44 UTC] PHP Warning:  Undefined variable $after_widget in /wordpress/wp-content/plugins/month-of-ramadan/month-of-ramadan.php on line 400
[09-Apr-2025 16:56:44 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:56:44 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:56:52 UTC] PHP Warning:  Undefined variable $after_widget in /wordpress/wp-content/plugins/month-of-ramadan/month-of-ramadan.php on line 400
[09-Apr-2025 16:56:52 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:56:52 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:00 UTC] PHP Warning:  Undefined variable $after_widget in /wordpress/wp-content/plugins/month-of-ramadan/month-of-ramadan.php on line 400
[09-Apr-2025 16:57:00 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:00 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:09 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:57:09 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:57:09 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:57:09 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:57:35 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:57:35 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:57:35 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:57:35 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:57:36 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:36 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:44 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:45 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:53 UTC] PHP Deprecated:  Function register_sidebar_widget is <strong>deprecated</strong> since version 2.8.0! Use wp_register_sidebar_widget() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:57:53 UTC] PHP Deprecated:  Function register_widget_control is <strong>deprecated</strong> since version 2.8.0! Use wp_register_widget_control() instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:02 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p>INSERT INTO `wp_options` (`option_name`, `option_value`, `autoload`) VALUES ('mait_options', 'a:3:{s:3:\"min\";i:1;s:5:\"users\";a:0:{}s:11:\"publish_own\";b:1;}', 'auto') ON DUPLICATE KEY UPDATE `option_name` = VALUES(`option_name`), `option_value` = VALUES(`option_value`), `autoload` = VALUES(`autoload`)</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: SELECT 1 FROM sqlite_temp_schema WHERE type = 'table' AND name = ? | parameters: wp_options</li>
<li>Executing: 
				SELECT column_name, is_nullable, column_default, data_type, extra
				FROM _wp_sqlite_mysql_information_schema_columns
				WHERE table_schema = ?
				AND table_name = ?
				ORDER BY ordinal_position
			 | parameters: database_name_here, wp_options</li>
<li>Executing: INSERT INTO `wp_options` () SELECT  FROM (VALUES ( 'mait_options' , 'a:3:{s:3:&quot;min&quot;;i:1;s:5:&quot;users&quot;;a:0:{}s:11:&quot;publish_own&quot;;b:1;}' , 'auto' )) WHERE true ON CONFLICT DO UPDATE SET `option_name` = `excluded`.`option_name` , `option_value` = `excluded`.`option_value` , `autoload` = `excluded`.`autoload` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near ")": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query('INSERT INTO `wp...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query('INSERT INTO `wp...')
#3 /wordpress/wp-includes/option.php(1134): WP_SQLite_DB->query('INSERT INTO `wp...')
#4 /wordpress/wp-content/plugins/multiple-approvals/multiple-approvals.php(59): add_option('mait_options', Array)
#5 /wordpress/wp-includes/class-wp-hook.php(324): mait_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_multip...', false)
#9 /internal/eval.php(20): activate_plugin('multiple-approv...')
#10 {main}</pre>
 for query INSERT INTO `wp_options` (`option_name`, `option_value`, `autoload`) VALUES ('mait_options', 'a:3:{s:3:\"min\";i:1;s:5:\"users\";a:0:{}s:11:\"publish_own\";b:1;}', 'auto') ON DUPLICATE KEY UPDATE `option_name` = VALUES(`option_name`), `option_value` = VALUES(`option_value`), `autoload` = VALUES(`autoload`) made by activate_plugin, do_action('activate_multiple-approvals/multiple-approvals.php'), WP_Hook->do_action, WP_Hook->apply_filters, mait_activate, add_option, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[09-Apr-2025 16:58:02 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:58:02 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:58:02 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:58:02 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:58:03 UTC] PHP Notice:  Function wp_enqueue_style was called <strong>incorrectly</strong>. Scripts and styles should not be registered or enqueued until the <code>wp_enqueue_scripts</code>, <code>admin_enqueue_scripts</code>, or <code>login_enqueue_scripts</code> hooks. This notice was triggered by the <code>mait_meta_box_css</code> handle. Please see <a href="https://developer.wordpress.org/advanced-administration/debug/debug-wordpress/">Debugging in WordPress</a> for more information. (This message was added in version 3.3.0.) in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:03 UTC] PHP Notice:  Function is_feed was called <strong>incorrectly</strong>. Conditional query tags do not work before the query is run. Before then, they always return false. Please see <a href="https://developer.wordpress.org/advanced-administration/debug/debug-wordpress/">Debugging in WordPress</a> for more information. (This message was added in version 3.1.0.) in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:03 UTC] PHP Warning:  Trying to access array offset on value of type bool in /wordpress/wp-content/plugins/multiple-approvals/multiple-approvals.php on line 75
[09-Apr-2025 16:58:12 UTC] PHP Notice:  Function wp_enqueue_style was called <strong>incorrectly</strong>. Scripts and styles should not be registered or enqueued until the <code>wp_enqueue_scripts</code>, <code>admin_enqueue_scripts</code>, or <code>login_enqueue_scripts</code> hooks. This notice was triggered by the <code>mait_meta_box_css</code> handle. Please see <a href="https://developer.wordpress.org/advanced-administration/debug/debug-wordpress/">Debugging in WordPress</a> for more information. (This message was added in version 3.3.0.) in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:12 UTC] PHP Notice:  Function is_feed was called <strong>incorrectly</strong>. Conditional query tags do not work before the query is run. Before then, they always return false. Please see <a href="https://developer.wordpress.org/advanced-administration/debug/debug-wordpress/">Debugging in WordPress</a> for more information. (This message was added in version 3.1.0.) in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:20 UTC] PHP Notice:  Function wp_enqueue_style was called <strong>incorrectly</strong>. Scripts and styles should not be registered or enqueued until the <code>wp_enqueue_scripts</code>, <code>admin_enqueue_scripts</code>, or <code>login_enqueue_scripts</code> hooks. This notice was triggered by the <code>mait_meta_box_css</code> handle. Please see <a href="https://developer.wordpress.org/advanced-administration/debug/debug-wordpress/">Debugging in WordPress</a> for more information. (This message was added in version 3.3.0.) in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:20 UTC] PHP Notice:  Function is_feed was called <strong>incorrectly</strong>. Conditional query tags do not work before the query is run. Before then, they always return false. Please see <a href="https://developer.wordpress.org/advanced-administration/debug/debug-wordpress/">Debugging in WordPress</a> for more information. (This message was added in version 3.1.0.) in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:29 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:29 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:58:29 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:58:29 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:58:29 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:58:38 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:58:47 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:59:17 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:59:17 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:59:17 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:59:17 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:59:17 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:59:26 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:59:35 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:59:44 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 16:59:44 UTC] PHP Warning:  Undefined array key "option_value" in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3080
[09-Apr-2025 16:59:44 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3081
[09-Apr-2025 16:59:44 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3082
[09-Apr-2025 16:59:44 UTC] PHP Warning:  Trying to access array offset on value of type null in /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php on line 3083
[09-Apr-2025 16:59:53 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 17:00:02 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 17:00:12 UTC] PHP Deprecated:  Function get_plugin_data was called with an argument that is <strong>deprecated</strong> since version 3.0.0! The <code>Site Wide Only: true</code> plugin header is deprecated. Use <code>Network: true</code> instead. in /wordpress/wp-includes/functions.php on line 6114
[09-Apr-2025 17:00:12 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> DROP PROCEDURE IF EXISTS wp_vsmp_compute_attribution;</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: DROP PROCEDURE IF EXISTS `wp_vsmp_compute_attribution` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near "PROCEDURE": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' DROP PROCEDURE...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' DROP PROCEDURE...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' DROP PROCEDURE...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  DROP PROCEDURE IF EXISTS wp_vsmp_compute_attribution; made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[09-Apr-2025 17:00:12 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_attribution (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT( 	"CREATE TABLE tmp_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id, MAX(influence) AS influence" 	, " FROM ", table_prefix, "vsmp_influence a" 	, " WHERE a.conversion_id IN (" 	, " SELECT conversion_id" 	, " FROM tmp_conversion_log" 	, " )"     , " GROUP BY a.conversion_id, a.delivery_event_id"     , ")" ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT( 	"CREATE TABLE tmp_adj_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id," 	, " (a.influence * (CASE WHEN sum_influence > 1 THEN 1 / sum_influence ELSE 1 END)) / 1 AS adj_influence" 	, " FROM tmp_influence a" 	, " JOIN (" 	, " SELECT conversion_id, SUM(influence) AS sum_influence" 	, " FROM tmp_influence" 	, " GROUP BY conversion_id" 	, " ) b ON b.conversion_id = a.conversion_id"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT( 	"CREATE TABLE tmp_attribution AS ("     , " SELECT DATE(b.log_time) AS cal_date, a.delivery_event_id,"     , " SUM(a.adj_influence) AS attributed_conversions,"     , " SUM(a.adj_influence * b.conversion_val) AS attributed_value"     , " FROM tmp_adj_influence a" 	, " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"  	, " GROUP BY 1, 2" 	, " )" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_attribution" 	, " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"      , " AND"     , " (SELECT to_date FROM tmp_date_range)"	 ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution"     , " (cal_date, delivery_event_id, attributed_conversions, attributed_value)"     , " SELECT cal_date, delivery_event_id, attributed_conversions, attributed_value"     , " FROM tmp_attribution" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution" 	, " (cal_date, attributed_conversions, attributed_value)" 	, " SELECT a.conversion_date," 	, " a.conversion_count - IFNULL(b.attributed_conversions,0) AS unattributed_conversions," 	, " a.conversion_value - IFNULL(b.attributed_value,0) AS unattributed_value" 	, " FROM (" 	, " SELECT date(log_time) AS conversion_date,"     , " COUNT(*) AS conversion_count,"     , " SUM(conversion_val) AS conversion_value" 	, " FROM tmp_conversion_log" 	, " GROUP BY 1" 	, " ) a" 	, " LEFT JOIN (" 	, " SELECT cal_date,"     , " SUM(attributed_conversions) AS attributed_conversions,"     , " SUM(attributed_value) AS attributed_value" 	, " FROM tmp_attribution" 	, " GROUP BY cal_date" 	, ") b ON b.cal_date = a.conversion_date"     , " WHERE a.conversion_value - IFNULL(b.attributed_value,0) > .01" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; END</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
MySQL query not supported. Cause: statement type: "createStatement" > "createProcedure"
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('MySQL query not...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_attribution (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT( 	"CREATE TABLE tmp_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id, MAX(influence) AS influence" 	, " FROM ", table_prefix, "vsmp_influence a" 	, " WHERE a.conversion_id IN (" 	, " SELECT conversion_id" 	, " FROM tmp_conversion_log" 	, " )"     , " GROUP BY a.conversion_id, a.delivery_event_id"     , ")" ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT( 	"CREATE TABLE tmp_adj_influence AS (" 	, " SELECT a.conversion_id, a.delivery_event_id," 	, " (a.influence * (CASE WHEN sum_influence > 1 THEN 1 / sum_influence ELSE 1 END)) / 1 AS adj_influence" 	, " FROM tmp_influence a" 	, " JOIN (" 	, " SELECT conversion_id, SUM(influence) AS sum_influence" 	, " FROM tmp_influence" 	, " GROUP BY conversion_id" 	, " ) b ON b.conversion_id = a.conversion_id"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT( 	"CREATE TABLE tmp_attribution AS ("     , " SELECT DATE(b.log_time) AS cal_date, a.delivery_event_id,"     , " SUM(a.adj_influence) AS attributed_conversions,"     , " SUM(a.adj_influence * b.conversion_val) AS attributed_value"     , " FROM tmp_adj_influence a" 	, " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"  	, " GROUP BY 1, 2" 	, " )" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_attribution" 	, " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"      , " AND"     , " (SELECT to_date FROM tmp_date_range)"	 ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution"     , " (cal_date, delivery_event_id, attributed_conversions, attributed_value)"     , " SELECT cal_date, delivery_event_id, attributed_conversions, attributed_value"     , " FROM tmp_attribution" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT( 	"INSERT INTO ", table_prefix, "vsmp_attribution" 	, " (cal_date, attributed_conversions, attributed_value)" 	, " SELECT a.conversion_date," 	, " a.conversion_count - IFNULL(b.attributed_conversions,0) AS unattributed_conversions," 	, " a.conversion_value - IFNULL(b.attributed_value,0) AS unattributed_value" 	, " FROM (" 	, " SELECT date(log_time) AS conversion_date,"     , " COUNT(*) AS conversion_count,"     , " SUM(conversion_val) AS conversion_value" 	, " FROM tmp_conversion_log" 	, " GROUP BY 1" 	, " ) a" 	, " LEFT JOIN (" 	, " SELECT cal_date,"     , " SUM(attributed_conversions) AS attributed_conversions,"     , " SUM(attributed_value) AS attributed_value" 	, " FROM tmp_attribution" 	, " GROUP BY cal_date" 	, ") b ON b.cal_date = a.conversion_date"     , " WHERE a.conversion_value - IFNULL(b.attributed_value,0) > .01" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_adj_influence; DROP TABLE IF EXISTS tmp_attribution; END made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[09-Apr-2025 17:00:12 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> DROP PROCEDURE IF EXISTS wp_vsmp_compute_influence;</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: DROP PROCEDURE IF EXISTS `wp_vsmp_compute_influence` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near "PROCEDURE": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' DROP PROCEDURE...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' DROP PROCEDURE...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' DROP PROCEDURE...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  DROP PROCEDURE IF EXISTS wp_vsmp_compute_influence; made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[09-Apr-2025 17:00:13 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_influence (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_Id"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_channel_lag AS ("     , " SELECT a.ID as channel_id, a.post_title AS channel,"     , " CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) AS day_no,"     , " CONVERT(IFNULL(c.meta_value, '0'), INTEGER) AS influence"  	, " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'lag_days'"     , " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND SUBSTR(c.meta_key,1,10) = 'influence_'"  	, " WHERE a.post_type = 'vsmp_channel'"     , " AND a.post_status = 'publish' "     , " AND CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) <= CONVERT(b.meta_value, INTEGER)"     , ')' ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "CREATE TABLE tmp_delivery_event_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_delivery_event_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT DATE_SUB(from_date, INTERVAL 14 DAY) FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" 	, ")" );      PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; CREATE TABLE tmp_delivery_event_influence_01 AS (  SELECT @row_seq := @row_seq + 1 as row_seq, a.conversion_id, a.channel_id, a.delivery_event_id, a.delivery_event_time, a.conversion_time, a.day_no  FROM (   SELECT a1.conversion_id, a3.channel_id, a2.delivery_event_id, a2.log_time AS delivery_event_time, a1.log_time AS conversion_time,    FLOOR(TIMESTAMPDIFF(SECOND, a2.log_time, a1.log_time) / 86400) AS day_no   FROM tmp_conversion_log a1   JOIN tmp_delivery_event_log a2 on a2.vsmp_visitor_Id = a1.vsmp_visitor_Id   JOIN tmp_delivery_event a3 ON a3.delivery_event_Id = a2.delivery_event_Id   JOIN (    SELECT channel_id, MAX(day_no) AS max_day_no    FROM tmp_channel_lag    GROUP BY channel_id   ) a4 ON a4.channel_id = a3.channel_id    WHERE a1.log_time >= a2.log_time - INTERVAL a4.max_day_no DAY   ORDER BY a1.conversion_id, a2.log_time  ) a  CROSS JOIN (   SELECT @row_seq := 0  ) b ); CREATE TABLE tmp_delivery_event_influence_02 AS (  SELECT a.conversion_id, a.channel_id, a.delivery_event_Id, a.day_no, a.delivery_event_time, a.conversion_time, b.path_seq  FROM tmp_delivery_event_influence_01 a    JOIN (   SELECT b1.row_seq, COUNT(*) AS path_seq   FROM tmp_delivery_event_influence_01 b1   JOIN tmp_delivery_event_influence_01 b2 ON b2.conversion_id = b1.conversion_id AND b2.delivery_event_time <= b1.delivery_event_time   GROUP BY b1.row_seq  ) b ON b.row_seq = a.row_seq ); SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_influence"  	, " WHERE conversion_id IN ("   	, " SELECT DISTINCT conversion_id"   	, " FROM tmp_delivery_event_influence_02"  	, ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_influence"     , " (conversion_Id, delivery_event_id, path_seq, influence)"     , " SELECT a.conversion_id, a.delivery_event_id, a.path_seq, b.influence / 100"     , " FROM tmp_delivery_event_influence_02 a"  	, " JOIN tmp_channel_lag b ON b.channel_id = a.channel_id AND b.day_no = a.day_no" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; END</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
MySQL query not supported. Cause: statement type: "createStatement" > "createProcedure"
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('MySQL query not...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_influence (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(     "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_Id"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_channel_lag AS ("     , " SELECT a.ID as channel_id, a.post_title AS channel,"     , " CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) AS day_no,"     , " CONVERT(IFNULL(c.meta_value, '0'), INTEGER) AS influence"  	, " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'lag_days'"     , " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND SUBSTR(c.meta_key,1,10) = 'influence_'"  	, " WHERE a.post_type = 'vsmp_channel'"     , " AND a.post_status = 'publish' "     , " AND CONVERT(SUBSTR(c.meta_key,11,1), INTEGER) <= CONVERT(b.meta_value, INTEGER)"     , ')' ); PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "CREATE TABLE tmp_delivery_event_log AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_delivery_event_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT DATE_SUB(from_date, INTERVAL 14 DAY) FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" 	, ")" );      PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; CREATE TABLE tmp_delivery_event_influence_01 AS (  SELECT @row_seq := @row_seq + 1 as row_seq, a.conversion_id, a.channel_id, a.delivery_event_id, a.delivery_event_time, a.conversion_time, a.day_no  FROM (   SELECT a1.conversion_id, a3.channel_id, a2.delivery_event_id, a2.log_time AS delivery_event_time, a1.log_time AS conversion_time,    FLOOR(TIMESTAMPDIFF(SECOND, a2.log_time, a1.log_time) / 86400) AS day_no   FROM tmp_conversion_log a1   JOIN tmp_delivery_event_log a2 on a2.vsmp_visitor_Id = a1.vsmp_visitor_Id   JOIN tmp_delivery_event a3 ON a3.delivery_event_Id = a2.delivery_event_Id   JOIN (    SELECT channel_id, MAX(day_no) AS max_day_no    FROM tmp_channel_lag    GROUP BY channel_id   ) a4 ON a4.channel_id = a3.channel_id    WHERE a1.log_time >= a2.log_time - INTERVAL a4.max_day_no DAY   ORDER BY a1.conversion_id, a2.log_time  ) a  CROSS JOIN (   SELECT @row_seq := 0  ) b ); CREATE TABLE tmp_delivery_event_influence_02 AS (  SELECT a.conversion_id, a.channel_id, a.delivery_event_Id, a.day_no, a.delivery_event_time, a.conversion_time, b.path_seq  FROM tmp_delivery_event_influence_01 a    JOIN (   SELECT b1.row_seq, COUNT(*) AS path_seq   FROM tmp_delivery_event_influence_01 b1   JOIN tmp_delivery_event_influence_01 b2 ON b2.conversion_id = b1.conversion_id AND b2.delivery_event_time <= b1.delivery_event_time   GROUP BY b1.row_seq  ) b ON b.row_seq = a.row_seq ); SET @stmt5 = CONCAT( 	"DELETE FROM ", table_prefix, "vsmp_influence"  	, " WHERE conversion_id IN ("   	, " SELECT DISTINCT conversion_id"   	, " FROM tmp_delivery_event_influence_02"  	, ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_influence"     , " (conversion_Id, delivery_event_id, path_seq, influence)"     , " SELECT a.conversion_id, a.delivery_event_id, a.path_seq, b.influence / 100"     , " FROM tmp_delivery_event_influence_02 a"  	, " JOIN tmp_channel_lag b ON b.channel_id = a.channel_id AND b.day_no = a.day_no" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_channel_lag; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_delivery_event_log; DROP TABLE IF EXISTS tmp_delivery_event_influence_01; DROP TABLE IF EXISTS tmp_delivery_event_influence_02; END made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[09-Apr-2025 17:00:13 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> DROP PROCEDURE IF EXISTS wp_vsmp_compute_path;</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: DROP PROCEDURE IF EXISTS `wp_vsmp_compute_path` | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
SQLSTATE[HY000]: General error: 1 near "PROCEDURE": syntax error
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('SQLSTATE[HY000]...', 0, Object(PDOException))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' DROP PROCEDURE...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' DROP PROCEDURE...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' DROP PROCEDURE...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  DROP PROCEDURE IF EXISTS wp_vsmp_compute_path; made by activate_plugin, do_action('activate_marketing-performance/marketing-performance.php'), WP_Hook->do_action, WP_Hook->apply_filters, vsmp_attribution_activate, vsmp_run_ddl, WP_SQLite_DB->query, WP_SQLite_DB->print_error
[09-Apr-2025 17:00:13 UTC] WordPress database error <div style="clear:both">&nbsp;</div>
<div class="queries" style="clear:both;margin-bottom:2px;border:red dotted thin;">
<p>MySQL query:</p>
<p> CREATE PROCEDURE wp_vsmp_compute_path (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(   "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_id," 	, " d.post_title AS channel_title"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'" 	, " JOIN ", table_prefix, "posts d ON d.ID = CONVERT(c.meta_value, INTEGER)"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT conversion_id, DATE(log_time) AS cal_date"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(   "CREATE TABLE tmp_influence AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_influence"     , " WHERE conversion_id IN ("     , " SELECT conversion_id"     , " FROM tmp_conversion_log"     , ")"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "DELETE FROM ", table_prefix, "vsmp_channel_metric"     , " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT(     "CREATE TABLE tmp_channel_metric_01 AS (" 	, " SELECT b.cal_date,"     , " TRIM(a.metric_detail) AS metric_detail,"     , " a.channel_count,"     , " COUNT(*) AS metric_count"     , " FROM (" 	, " SELECT a1.conversion_id,"     , " GROUP_CONCAT(a1.channel_title ORDER BY a1.channel_title SEPARATOR ';') AS metric_detail,"     , " COUNT(*) AS channel_count" 	, " FROM (" 	, " SELECT DISTINCT a1a.conversion_id, a1b.channel_title" 	, " FROM tmp_influence a1a" 	, " JOIN tmp_delivery_event a1b ON a1b.delivery_event_id = a1a.delivery_event_id"     , " ) a1" 	, " GROUP BY a1.conversion_id"     , " ) a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'channels', metric_detail, metric_count"     , " FROM tmp_channel_metric_01" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT(     "CREATE TABLE tmp_channel_metric_02 AS (" 	, " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM wp_vsmp_influence a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " WHERE a.path_seq = 1"     , " GROUP BY 1, 2"     , " )" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt8 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'starter', channel_title, metric_count"     , " FROM tmp_channel_metric_02" ); PREPARE vsmp_sql FROM @stmt8; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt9 = CONCAT(     "CREATE TABLE tmp_channel_metric_03 AS ("     , " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM tmp_influence a"      , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " JOIN ("     , " SELECT conversion_id, MAX(path_seq) AS max_path_seq"     , " FROM tmp_influence"     , " GROUP BY conversion_id"     , " ) d ON d.conversion_id = a.conversion_id AND d.max_path_seq = a.path_seq"      , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt9; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt10 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'closer', channel_title, metric_count"     , " FROM tmp_channel_metric_03" ); PREPARE vsmp_sql FROM @stmt10; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; END</p>
<p>Queries made or created this session were:</p>
<ol>
<li>Executing: BEGIN | (no parameters)</li>
<li>Executing: ROLLBACK | (no parameters)</li>
</ol>
</div>
<div style="clear:both;margin-bottom:2px;border:red dotted thin;" class="error_message" style="border-bottom:dotted blue thin;">
MySQL query not supported. Cause: statement type: "createStatement" > "createProcedure"
</div>
<p>Backtrace:</p>
<pre>#0 /internal/shared/sqlite-database-integration/wp-includes/sqlite-ast/class-wp-sqlite-driver.php(690): WP_SQLite_Driver->new_driver_exception('MySQL query not...', 0, Object(WP_SQLite_Driver_Exception))
#1 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(472): WP_SQLite_Driver->query(' CREATE PROCEDU...')
#2 /internal/shared/sqlite-database-integration/wp-includes/sqlite/class-wp-sqlite-db.php(413): WP_SQLite_DB->_do_query(' CREATE PROCEDU...')
#3 /wordpress/wp-content/plugins/marketing-performance/activate/vsmp-run_ddl.php(42): WP_SQLite_DB->query(' CREATE PROCEDU...')
#4 /wordpress/wp-content/plugins/marketing-performance/marketing-performance.php(298): vsmp_run_ddl('vsmp-install.sq...')
#5 /wordpress/wp-includes/class-wp-hook.php(324): vsmp_attribution_activate(false)
#6 /wordpress/wp-includes/class-wp-hook.php(348): WP_Hook->apply_filters('', Array)
#7 /wordpress/wp-includes/plugin.php(517): WP_Hook->do_action(Array)
#8 /wordpress/wp-admin/includes/plugin.php(703): do_action('activate_market...', false)
#9 /internal/eval.php(20): activate_plugin('marketing-perfo...')
#10 {main}</pre>
 for query  CREATE PROCEDURE wp_vsmp_compute_path (IN `table_prefix` VARCHAR(16)) BEGIN DROP TABLE IF EXISTS tmp_date_range; DROP TABLE IF EXISTS tmp_delivery_event; DROP TABLE IF EXISTS tmp_conversion_log; DROP TABLE IF EXISTS tmp_influence; DROP TABLE IF EXISTS tmp_channel_metric_01; DROP TABLE IF EXISTS tmp_channel_metric_02; DROP TABLE IF EXISTS tmp_channel_metric_03; CREATE TABLE tmp_date_range AS (      SELECT DATE_SUB(CURRENT_DATE, INTERVAL 28 DAY) AS from_date, CURRENT_DATE AS to_date ); SET @stmt1 = CONCAT(   "CREATE TABLE tmp_delivery_event AS ("     , " SELECT a.ID AS delivery_event_Id,"     , " CONVERT(b.meta_value, INTEGER) AS campaign_id,"     , " CONVERT(c.meta_value, INTEGER) AS channel_id," 	, " d.post_title AS channel_title"     , " FROM ", table_prefix, "posts a"     , " JOIN ", table_prefix, "postmeta b ON b.post_id = a.ID AND b.meta_key = 'campaign_id'"  	, " JOIN ", table_prefix, "postmeta c ON c.post_id = a.ID AND c.meta_key = 'channel_id'" 	, " JOIN ", table_prefix, "posts d ON d.ID = CONVERT(c.meta_value, INTEGER)"     , " WHERE a.post_type = 'vsmp_delivery_event'"     , " AND a.post_status = 'publish'"     , ')' ); PREPARE vsmp_sql FROM @stmt1; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt2 = CONCAT(     "CREATE TABLE tmp_conversion_log AS ("     , " SELECT conversion_id, DATE(log_time) AS cal_date"     , " FROM ", table_prefix, "vsmp_conversion_log"     , " WHERE DATE(log_time) BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)"  	, ")" );      PREPARE vsmp_sql FROM @stmt2; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt3 = CONCAT(   "CREATE TABLE tmp_influence AS ("     , " SELECT *"     , " FROM ", table_prefix, "vsmp_influence"     , " WHERE conversion_id IN ("     , " SELECT conversion_id"     , " FROM tmp_conversion_log"     , ")"     , ")" ); PREPARE vsmp_sql FROM @stmt3; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt4 = CONCAT(     "DELETE FROM ", table_prefix, "vsmp_channel_metric"     , " WHERE cal_date BETWEEN"     , " (SELECT from_date FROM tmp_date_range)"     , " AND"     , " (SELECT to_date FROM tmp_date_range)" ); PREPARE vsmp_sql FROM @stmt4; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt5 = CONCAT(     "CREATE TABLE tmp_channel_metric_01 AS (" 	, " SELECT b.cal_date,"     , " TRIM(a.metric_detail) AS metric_detail,"     , " a.channel_count,"     , " COUNT(*) AS metric_count"     , " FROM (" 	, " SELECT a1.conversion_id,"     , " GROUP_CONCAT(a1.channel_title ORDER BY a1.channel_title SEPARATOR ';') AS metric_detail,"     , " COUNT(*) AS channel_count" 	, " FROM (" 	, " SELECT DISTINCT a1a.conversion_id, a1b.channel_title" 	, " FROM tmp_influence a1a" 	, " JOIN tmp_delivery_event a1b ON a1b.delivery_event_id = a1a.delivery_event_id"     , " ) a1" 	, " GROUP BY a1.conversion_id"     , " ) a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " GROUP BY 1, 2"     , ")" ); PREPARE vsmp_sql FROM @stmt5; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt6 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'channels', metric_detail, metric_count"     , " FROM tmp_channel_metric_01" ); PREPARE vsmp_sql FROM @stmt6; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt7 = CONCAT(     "CREATE TABLE tmp_channel_metric_02 AS (" 	, " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM wp_vsmp_influence a"     , " JOIN tmp_conversion_log b ON b.conversion_id = a.conversion_id"     , " JOIN tmp_delivery_event c ON c.delivery_event_Id = a.delivery_event_id"     , " WHERE a.path_seq = 1"     , " GROUP BY 1, 2"     , " )" ); PREPARE vsmp_sql FROM @stmt7; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt8 = CONCAT(     "INSERT INTO ", table_prefix, "vsmp_channel_metric" 	, " (cal_date, metric_type, metric_detail, metric_count)"     , " SELECT cal_date, 'starter', channel_title, metric_count"     , " FROM tmp_channel_metric_02" ); PREPARE vsmp_sql FROM @stmt8; EXECUTE vsmp_sql; DEALLOCATE PREPARE vsmp_sql; SET @stmt9 = CONCAT(     "CREATE TABLE tmp_channel_metric_03 AS ("     , " SELECT b.cal_date, c.channel_title, COUNT(*) AS metric_count"     , " FROM tmp_influence a"      , "
Node.js v23.11.0

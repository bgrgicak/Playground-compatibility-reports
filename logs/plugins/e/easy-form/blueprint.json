{
  "landingPage": "/wp-admin/admin.php?page=ays-form-maker",
  "preferredVersions": {
    "php": "8.2",
    "wp": "latest"
  },
  "features": {
    "networking": true
  },
  "steps": [
    {
      "step": "defineWpConfigConsts",
      "consts": {
        "WP_AUTO_UPDATE_CORE": false,
        "DISABLE_WP_CRON": true
      }
    },
    {
      "step": "login",
      "username": "admin",
      "password": "admin123"
    },
    {
      "step": "installPlugin",
      "pluginData": {
        "resource": "wordpress.org/plugins",
        "slug": "easy-form"
      }
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n\n$posts = get_posts(array(\n 'numberposts' => -1,\n 'post_type' => array('post', 'page'),\n 'post_status' => 'any'\n));\n\nforeach ($posts as $post) {\n wp_delete_post($post->ID, true);\n}"
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n\n// Define the form ID\n$form_id = 1;\n\n// Generate the Gutenberg block content dynamically\n$post_content = '<!-- wp:easy-form/form {\"metaFieldValue\":' . $form_id . ',\"shortcode\":\"[ays_form id=' . $form_id . ']\"} -->\n<div class=\"wp-block-easy-form-form\">[ays_form id=\"' . $form_id . '\"]</div>\n<!-- /wp:easy-form/form -->';\n\n// Create the new post\n$post_data = array(\n    'post_title'    => 'Easy Form Example Post',\n    'post_content'  => $post_content,\n    'post_status'   => 'publish',\n    'post_type'     => 'post'\n);\n\n// Insert the post into the database\nwp_insert_post($post_data);\n?>"
    },
    {
      "step": "setSiteOptions",
      "options": {
        "blogname": "Easy Form Test Site",
        "blogdescription": "Automated Easy Form Preview"
      }
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "easy-form"
      },
      "options": {
        "activate": true
      }
    }
  ]
}

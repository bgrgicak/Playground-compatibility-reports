{
  "landingPage": "/wp-admin/admin.php?page=poll-maker-ays",
  "preferredVersions": {
    "php": "8.2",
    "wp": "latest"
  },
  "features": {
    "networking": true
  },
  "steps": [
    {
      "step": "defineWpConfigConsts",
      "consts": {
        "WP_AUTO_UPDATE_CORE": false,
        "DISABLE_WP_CRON": true
      }
    },
    {
      "step": "login",
      "username": "admin",
      "password": "admin123"
    },
    {
      "step": "installPlugin",
      "pluginData": {
        "resource": "wordpress.org/plugins",
        "slug": "poll-maker"
      }
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n\n$posts = get_posts(array(\n 'numberposts' => -1,\n 'post_type' => array('post', 'page'),\n 'post_status' => 'any'\n));\n\nforeach ($posts as $post) {\n wp_delete_post($post->ID, true);\n}"
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n$poll_post_id = 1;\n$page_args = array(\n 'post_type' => 'post',\n 'post_date' => current_time('mysql'),\n 'post_status' => 'publish',\n 'post_title' => 'Poll Maker Example Post',\n 'post_content' => '<!-- wp:poll-maker/poll {\"metaFieldValue\":1,\"shortcode\":\"[ays_poll id=1]\"} -->\n<div class=\"wp-block-poll-maker-poll\">[ays_poll id=\"1\"]</div>\n<!-- /wp:poll-maker/poll -->'\n);\n$page_id = wp_insert_post($page_args);"
    },
    {
      "step": "setSiteOptions",
      "options": {
        "blogname": "Poll Maker Test Site",
        "blogdescription": "Automated Poll Maker Preview"
      }
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "poll-maker"
      },
      "options": {
        "activate": true
      }
    }
  ]
}

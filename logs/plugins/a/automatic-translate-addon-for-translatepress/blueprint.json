{
  "landingPage": "/wp-admin/home/?trp-edit-translation=true",
  "preferredVersions": {
    "php": "8.2",
    "wp": "latest"
  },
  "siteOptions": {
    "trp_plugin_optin": "1"
  },
  "phpExtensionBundles": [
    "kitchen-sink"
  ],
  "features": {
    "networking": true
  },
  "steps": [
    {
      "step": "defineWpConfigConsts",
      "consts": {
        "WP_AUTO_UPDATE_CORE": false,
        "DISABLE_WP_CRON": true
      }
    },
    {
      "step": "login",
      "username": "admin",
      "password": "password"
    },
    {
      "step": "installTheme",
      "themeData": {
        "resource": "wordpress.org/themes",
        "slug": "astra"
      },
      "options": {
        "activate": true
      }
    },
    {
      "step": "installPlugin",
      "pluginData": {
        "resource": "wordpress.org/plugins",
        "slug": "translatepress-multilingual"
      },
      "options": {
        "activate": true
      }
    },
    {
      "step": "installPlugin",
      "pluginData": {
        "resource": "wordpress.org/plugins",
        "slug": "automatic-translate-addon-for-translatepress"
      },
      "options": {
        "activate": true
      }
    },
    {
      "step": "importWxr",
      "file": {
        "resource": "url",
        "url": "https://raw.githubusercontent.com/CoolPluginsTeam/wp-playground-repo/main/translation/automatic-translate-pages.xml"
      }
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/mu-plugins/set-trp-en-fr.php",
      "data": "<?php\nadd_action('init', function() {\n    global $wpdb;\n\n    // 1. Create table\n    $table = $wpdb->prefix . 'trp_dictionary_en_us_fr_ca';\n    $charset_collate = $wpdb->get_charset_collate();\n    $sql = \"CREATE TABLE IF NOT EXISTS $table (\n        id int(11) NOT NULL AUTO_INCREMENT,\n        original text NOT NULL,\n        translated text,\n        status tinyint(1) DEFAULT 0,\n        block_type tinyint(1) DEFAULT 0,\n        original_id int(11) DEFAULT NULL,\n        PRIMARY KEY (id)\n    ) $charset_collate;\";\n    require_once ABSPATH . 'wp-admin/includes/upgrade.php';\n    dbDelta($sql);\n\n    // 2. Update TranslatePress settings\n    $trp_settings = array(\n        'default-language' => 'en_US',\n        'publish-languages' => array('en_US', 'fr_CA'),\n        'translation-languages' => array('en_US', 'fr_CA'),\n        'url-slugs' => array(\n            'en_US' => 'en',\n            'fr_CA' => 'fr'\n        ),\n        'force-language-to-custom-links' => 'yes',\n        'shortcode-options' => 'flags-full-names',\n        'menu-options' => 'flags-full-names',\n        'trp-ls-floater' => 'yes',\n        'floater-options' => 'flags-full-names',\n        'floater-color' => 'dark',\n        'floater-position' => 'bottom-right',\n        'native_or_english_name' => 'english_name',\n        'add-subdirectory-to-default-language' => 'no',\n        'trp-ls-show-poweredby' => 'no',\n        'translation-languages-formality-parameter' => array(\n            'en_US' => 'default',\n            'fr_CA' => 'default'\n        )\n    );\n    update_option('trp_settings', $trp_settings);\n});\n\nadd_action('admin_head', function() {\n    echo '<style>div#cpfNoticePanel { display: none !important; }</style>';\n});"
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/mu-plugins/automatic-translate-addon-for-translatepress-notice.php",
      "data": "<?php\nadd_action('admin_footer', function () {\n    $home_url = esc_url(home_url());\n    $edit_url = esc_url(admin_url('post.php?post=64437&action=edit'));\n    $events_url = esc_url(admin_url('edit.php?post_type=tribe_events'));\n    ?>\n    <script>\n    document.addEventListener('DOMContentLoaded', function () {\n        const notice = document.createElement('div');\n        notice.className = 'notice notice-info is-dismissible';\n        notice.style = 'padding: 25px; font-family: sans-serif; margin: 25px 20px; border-left: 5px solid #00a0d2; background: #fff;';\n        notice.innerHTML = `\n            <h2 style='margin-top: 0; display: flex; align-items: center; gap: 10px;'>\n                Easily add powerful AI translations anywhere on your site using the AI Translation for TranslatePress plugin.\n            </h2>\n            <p style='margin-bottom: 15px; font-size: 15px;'>\n             AI Translation for TranslatePress makes website translation easy. It automatically translates entire web pages, eliminating the need for manual translation\n            </p>\n            <div style='display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;'>\n         <a href='/wp-admin/home/?trp-edit-translation=true' class='button button-secondary' style='padding: 10px 24px; font-size: 14px;'>üõ† Translate Site</a>\n       <a href='https://coolplugins.net/product/automatic-translate-addon-for-translatepress-pro/?utm_source=tpa_plugin&utm_medium=readme&utm_campaign=get_pro&utm_content=wp_playgroud_buy_pro' target='_blank' class='button' style='padding: 10px 24px; font-size: 14px; background: linear-gradient(90deg, #d54e21, #ff851b); color: white; border: none;'>‚≠ê Get PRO ‚Äî Unlock All Features</a>\n            </div>\n            <p style='font-size: 13px; margin-top: 15px; color: #555;'>üß© Pro is the enhanced edition of our AI Translation plugin for TranslatePress, offering advanced AI engine support, customizable workflows, and premium features. Instantly translate full pages using Google, Yandex, or Chrome AI for fast, accurate results.</p>\n        `;\n        const wrap = document.getElementById('wpbody-content');\n        if (wrap && !document.getElementById('my-timeline-notice')) {\n            notice.id = 'my-timeline-notice';\n            wrap.prepend(notice);\n        }\n    });\n    </script>\n    <?php\n});"
    },
    {
      "step": "runPHP",
      "code": "require_once ABSPATH . 'wp-content/mu-plugins/set-trp-en-fr.php';"
    },
    {
      "step": "runPHP",
      "code": "<?php\nob_start();\nrequire_once '/wordpress/wp-load.php';\nob_end_clean();\n\n// Set 'The Joy of Traveling' as homepage\n$page = get_page_by_title('The Joy of Traveling');\nif ($page) {\n  update_option('show_on_front', 'page');\n  update_option('page_on_front', $page->ID);\n  echo \"‚úÖ 'The Joy of Traveling' page set as homepage.\";\n} else {\n  echo \"‚ùå 'The Joy of Traveling' page not found.\";\n}"
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "automatic-translate-addon-for-translatepress"
      },
      "options": {
        "activate": true
      }
    }
  ]
}
